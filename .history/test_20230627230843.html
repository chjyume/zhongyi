<!DOCTYPE html>
<html>
  <head>
    <style>
        html, body {
            margin: 50px;
        }
    .text-block {
    display: none;
    }
    </style>
  </head>
  <body>
    <div id="text-container">
        <div class="text-block">
          <p>这是第一段话。</p>
        </div>
        <div class="text-block">
          <p>这是第二段话。</p>
        </div>
        <div class="text-block">
          <p>这是第三段话。</p>
        </div>
      </div>
    <script>
        var textBlocks = document.getElementsByClassName('text-block');
    var currentIndex = 0;
    var currentCharIndex = 0;
    var isFullyDisplayed = false;

    function displayNextCharacter() {
    if (currentIndex >= textBlocks.length) {
        return;
    }
    
    var currentBlock = textBlocks[currentIndex];
    var text = currentBlock.textContent;
    
    // 如果当前段落已全部显示，则直接跳转到下一段
    if (isFullyDisplayed) {
        currentBlock.style.display = 'block';
        currentIndex++;
        currentCharIndex = 0;
        isFullyDisplayed = false;
        return;
    }
    
    // 逐个显示文本字符
    currentBlock.style.display = 'block';
    currentBlock.textContent = text.slice(0, currentCharIndex);
    currentCharIndex++;
    
    // 判断是否已经完全显示该段落
    if (currentCharIndex > text.length) {
        isFullyDisplayed = true;
    } else {
        setTimeout(displayNextCharacter, 50);
    }
    }

    document.getElementById('text-container').addEventListener('click', function() {
    // 如果当前段落未全部显示，一次性完全显示
    if (!isFullyDisplayed) {
        var currentBlock = textBlocks[currentIndex];
        currentBlock.style.display = 'block';
        currentBlock.textContent = currentBlock.textContent.trim();
        isFullyDisplayed = true;
        return;
    }
    
    // 跳转到下一段落
    currentIndex++;
    currentCharIndex = 0;
    isFullyDisplayed = false;
    displayNextCharacter();
    });
    </script>
  </body>
</html>
        